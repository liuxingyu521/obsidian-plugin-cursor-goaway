/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => CursorGoaway
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var CursorGoaway = class extends import_obsidian.Plugin {
  async onload() {
    this.registerEvent(
      this.app.workspace.on("file-open", (file) => {
        let startTime;
        let isBlurring = false;
        const blurEditor = () => {
          var _a, _b;
          (_b = (_a = this.app.workspace.activeEditor) == null ? void 0 : _a.editor) == null ? void 0 : _b.blur();
          if (performance.now() - startTime < 500) {
            requestAnimationFrame(blurEditor);
          } else {
            isBlurring = false;
          }
        };
        this.cleanupKeydownHandler();
        if ((file == null ? void 0 : file.extension) === "md") {
          startTime = performance.now();
          isBlurring = true;
          requestAnimationFrame(blurEditor);
          const onKeyDown = (e) => {
            var _a;
            if (e.key !== "ArrowDown")
              return;
            const activeFile = this.app.workspace.getActiveFile();
            if ((activeFile == null ? void 0 : activeFile.path) !== file.path)
              return this.cleanupKeydownHandler();
            if (isBlurring)
              return;
            e.preventDefault();
            const editor = (_a = this.app.workspace.activeEditor) == null ? void 0 : _a.editor;
            if (editor) {
              try {
                editor.focus();
              } catch (err) {
                console.debug("focus() failed", err);
              }
              editor.setCursor(0, 0);
            }
            this.cleanupKeydownHandler();
          };
          document.addEventListener("keydown", onKeyDown, true);
          this.currentKeydownHandler = onKeyDown;
        }
      })
    );
  }
  /**
   * cleanup the keydown handler
   */
  cleanupKeydownHandler() {
    if (this.currentKeydownHandler) {
      document.removeEventListener("keydown", this.currentKeydownHandler, true);
      this.currentKeydownHandler = void 0;
    }
  }
  onunload() {
    this.cleanupKeydownHandler();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBFZGl0b3IgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEN1cnNvckdvYXdheSBleHRlbmRzIFBsdWdpbiB7XG5cdHByaXZhdGUgY3VycmVudEtleWRvd25IYW5kbGVyPzogKGU6IEtleWJvYXJkRXZlbnQpID0+IHZvaWQ7XG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtb3BlbicsIChmaWxlKSA9PiB7XG5cdFx0XHRcdGxldCBzdGFydFRpbWU6IG51bWJlcjtcblx0XHRcdFx0bGV0IGlzQmx1cnJpbmcgPSBmYWxzZTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IGJsdXJFZGl0b3IgPSAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUVkaXRvcj8uZWRpdG9yPy5ibHVyKCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lIDwgNTAwKSB7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYmx1ckVkaXRvcilcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0aXNCbHVycmluZyA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFsd2F5cyBjbGVhbnVwIGFueSBwcmV2aW91cyBvbmUtdGltZSBoYW5kbGVyIHdoZW4gb3BlbmluZyBhIG5ldyBmaWxlXG5cdFx0XHRcdHRoaXMuY2xlYW51cEtleWRvd25IYW5kbGVyKCk7XG5cblx0XHRcdFx0Ly8gd2hlbiB0b2dnbGUgdG8gdGhlIG1kIGZpbGUsIGJsdXIgdGhlIHBhZ2UgaW4gNTAwbXMgdG8gYXZvaWQgYnJlYWsgdGhlIHByZXZpZXcgc3R5bGVcdFxuXHRcdFx0XHRpZiAoZmlsZT8uZXh0ZW5zaW9uID09PSAnbWQnKSB7XG5cdFx0XHRcdFx0c3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cdFx0XHRcdFx0aXNCbHVycmluZyA9IHRydWU7XG5cdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGJsdXJFZGl0b3IpO1xuXG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc3Qgb25LZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdGlmIChlLmtleSAhPT0gJ0Fycm93RG93bicpIHJldHVybjtcblx0XHRcdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0XHRcdFx0Ly8gT25seSByZWFjdCBpZiB0aGUgc2FtZSBmaWxlIGlzIHN0aWxsIGFjdGl2ZVxuXHRcdFx0XHRcdFx0aWYgKGFjdGl2ZUZpbGU/LnBhdGggIT09IGZpbGUucGF0aCkgcmV0dXJuIHRoaXMuY2xlYW51cEtleWRvd25IYW5kbGVyKCk7XG5cdFx0XHRcdFx0XHQvLyBJZ25vcmUgQXJyb3dEb3duIHdoaWxlIGJsdXIgY3ljbGUgaXMgYWN0aXZlXG5cdFx0XHRcdFx0XHRpZiAoaXNCbHVycmluZykgcmV0dXJuO1xuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0Y29uc3QgZWRpdG9yID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUVkaXRvcj8uZWRpdG9yIGFzIEVkaXRvciB8IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdGlmIChlZGl0b3IpIHtcblx0XHRcdFx0XHRcdFx0dHJ5IHsgZWRpdG9yLmZvY3VzKCk7IH0gY2F0Y2ggKGVycikgeyBjb25zb2xlLmRlYnVnKCdmb2N1cygpIGZhaWxlZCcsIGVycik7IH1cblx0XHRcdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcigwLCAwKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHRoaXMuY2xlYW51cEtleWRvd25IYW5kbGVyKCk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlEb3duLCB0cnVlKTtcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnRLZXlkb3duSGFuZGxlciA9IG9uS2V5RG93bjtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQpXG5cdFx0XG5cdH1cblxuXHQvKipcblx0ICogY2xlYW51cCB0aGUga2V5ZG93biBoYW5kbGVyXG5cdCAqL1xuXHRjbGVhbnVwS2V5ZG93bkhhbmRsZXIoKSB7XG5cdFx0aWYgKHRoaXMuY3VycmVudEtleWRvd25IYW5kbGVyKSB7XG5cdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5jdXJyZW50S2V5ZG93bkhhbmRsZXIsIHRydWUpO1xuXHRcdFx0dGhpcy5jdXJyZW50S2V5ZG93bkhhbmRsZXIgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdFx0dGhpcy5jbGVhbnVwS2V5ZG93bkhhbmRsZXIoKTtcblx0fVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUErQjtBQUUvQixJQUFxQixlQUFyQixjQUEwQyx1QkFBTztBQUFBLEVBRWhELE1BQU0sU0FBUztBQUNkLFNBQUs7QUFBQSxNQUNKLEtBQUssSUFBSSxVQUFVLEdBQUcsYUFBYSxDQUFDLFNBQVM7QUFDNUMsWUFBSTtBQUNKLFlBQUksYUFBYTtBQUVqQixjQUFNLGFBQWEsTUFBTTtBQVY3QjtBQVdLLDJCQUFLLElBQUksVUFBVSxpQkFBbkIsbUJBQWlDLFdBQWpDLG1CQUF5QztBQUV6QyxjQUFJLFlBQVksSUFBSSxJQUFJLFlBQVksS0FBSztBQUN4QyxrQ0FBc0IsVUFBVTtBQUFBLFVBQ2pDLE9BQU87QUFDTix5QkFBYTtBQUFBLFVBQ2Q7QUFBQSxRQUNEO0FBR0EsYUFBSyxzQkFBc0I7QUFHM0IsYUFBSSw2QkFBTSxlQUFjLE1BQU07QUFDN0Isc0JBQVksWUFBWSxJQUFJO0FBQzVCLHVCQUFhO0FBQ2IsZ0NBQXNCLFVBQVU7QUFHaEMsZ0JBQU0sWUFBWSxDQUFDLE1BQXFCO0FBOUI3QztBQStCTSxnQkFBSSxFQUFFLFFBQVE7QUFBYTtBQUMzQixrQkFBTSxhQUFhLEtBQUssSUFBSSxVQUFVLGNBQWM7QUFFcEQsaUJBQUkseUNBQVksVUFBUyxLQUFLO0FBQU0scUJBQU8sS0FBSyxzQkFBc0I7QUFFdEUsZ0JBQUk7QUFBWTtBQUNoQixjQUFFLGVBQWU7QUFDakIsa0JBQU0sVUFBUyxVQUFLLElBQUksVUFBVSxpQkFBbkIsbUJBQWlDO0FBQ2hELGdCQUFJLFFBQVE7QUFDWCxrQkFBSTtBQUFFLHVCQUFPLE1BQU07QUFBQSxjQUFHLFNBQVMsS0FBUDtBQUFjLHdCQUFRLE1BQU0sa0JBQWtCLEdBQUc7QUFBQSxjQUFHO0FBQzVFLHFCQUFPLFVBQVUsR0FBRyxDQUFDO0FBQUEsWUFDdEI7QUFDQSxpQkFBSyxzQkFBc0I7QUFBQSxVQUM1QjtBQUNBLG1CQUFTLGlCQUFpQixXQUFXLFdBQVcsSUFBSTtBQUNwRCxlQUFLLHdCQUF3QjtBQUFBLFFBQzlCO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRjtBQUFBLEVBRUQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLHdCQUF3QjtBQUN2QixRQUFJLEtBQUssdUJBQXVCO0FBQy9CLGVBQVMsb0JBQW9CLFdBQVcsS0FBSyx1QkFBdUIsSUFBSTtBQUN4RSxXQUFLLHdCQUF3QjtBQUFBLElBQzlCO0FBQUEsRUFDRDtBQUFBLEVBRUEsV0FBVztBQUNWLFNBQUssc0JBQXNCO0FBQUEsRUFDNUI7QUFDRDsiLAogICJuYW1lcyI6IFtdCn0K
